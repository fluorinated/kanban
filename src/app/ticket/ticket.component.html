<div class="card">
  <div class="close-btn" (click)="closeTicket()">
    <app-button>
      <app-icon icon="faClose" color="neutral-2"></app-icon>
    </app-button>
  </div>

  <div class="container">
    <div class="ticket-number-container">
      <p class="ticket-number">
        <span class="ticket-number-span">{{ ticket?.ticketNumber }}</span>
      </p>
    </div>
    <h2
      class="title"
      *ngIf="(isEditingTitle$ | async) === false"
      (click)="startEditing('title')"
    >
      {{ ticket?.title }}
    </h2>

    <app-input
      *ngIf="isEditingTitle$ | async"
      [h2]="true"
      class="textarea"
      placeholder="ticket title"
      [value]="ticket?.title"
      [isTextarea]="true"
      (onBlur)="saveEditField('title', $event)"
    ></app-input>

    <p
      *ngIf="(isEditingDescription$ | async) === false"
      class="description"
      (click)="startEditing('description')"
    >
      {{ ticket?.description }}
    </p>

    <app-input
      *ngIf="isEditingDescription$ | async"
      [h2]="false"
      class="textarea"
      placeholder="ticket description"
      [value]="ticket?.description"
      [isTextarea]="true"
      (onBlur)="saveEditField('description', $event)"
    ></app-input>

    <div class="tags" (click)="startEditing('tags')">
      <app-tags
        [tags]="ticket?.tags"
        [showCloseButton]="isEditingTags$ | async"
        (closeClicked)="removeTag($event)"
        [noScroll]="true"
      ></app-tags>
    </div>

    <div class="tags-input-container" *ngIf="isEditingTags$ | async">
      <app-input
        [h2]="false"
        class="input"
        placeholder="ticket tags"
        [isTextarea]="false"
        [options]="tags"
        [formControl]="form"
        (onBlur)="saveEditField('tags', $event)"
        (optionClicked)="tagClicked($event)"
      ></app-input>
    </div>

    <p
      *ngIf="(isEditingDueDate$ | async) === false"
      class="due-date"
      (click)="startEditing('dueDate')"
    >
      due {{ ticket?.dueDate }}
    </p>

    <app-input
      *ngIf="isEditingDueDate$ | async"
      [h2]="false"
      class="textarea"
      placeholder="ticket due date"
      [value]="ticket?.dueDate"
      [isTextarea]="true"
      (onBlur)="saveEditField('dueDate', $event)"
    ></app-input>

    <p class="created-date">created {{ ticket?.createdDate }}</p>
  </div>
</div>
